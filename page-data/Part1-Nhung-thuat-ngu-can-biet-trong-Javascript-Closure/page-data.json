{"componentChunkName":"component---src-templates-post-js","path":"/Part1-Nhung-thuat-ngu-can-biet-trong-Javascript-Closure/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"lời-nói-đầu\" style=\"position:relative;\"><a href=\"#l%E1%BB%9Di-n%C3%B3i-%C4%91%E1%BA%A7u\" aria-label=\"lời nói đầu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lời nói đầu</h2>\n<p>Nếu bạn làm việc với javascript nhiều bạn cần hiểu rõ về nó, cũng như những khái niệm cơ bản.\nKhi muốn giỏi bất cứ một việc gì thì bạn phải hiểu công việc mình đang làm.\nLoạt bài này sẽ là sẽ giải thích cho bạn thuật ngữ đầu tiên là <code class=\"language-text\">Closure</code>.</p>\n<!--more-->\n<h2 id=\"tầm-quan-trọng-của-closure\" style=\"position:relative;\"><a href=\"#t%E1%BA%A7m-quan-tr%E1%BB%8Dng-c%E1%BB%A7a-closure\" aria-label=\"tầm quan trọng của closure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tầm quan trọng của Closure?</h2>\n<p>Closures rất quan trọng bởi nó kiểm soát những gì có và không có trong scope function của bạn, cùng với những biến được chia sẻ giữa các function con trong cùng một scope. Giúp bạn hiểu cách mà các biến và function làm việc cùng nhau trong code của bạn.\nTầm quan trọng của Closure được ví như là bạn nói tiếng anh nhưng lại không biết ngữ pháp vậy.\nClosure thường được dùng trong Javascript với những dữ liệu riêng tư, trong event handlers và call back function.</p>\n<h2 id=\"closure-là-gì\" style=\"position:relative;\"><a href=\"#closure-l%C3%A0-g%C3%AC\" aria-label=\"closure là gì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Closure là gì?</h2>\n<p>Closure là một sự kết hợp đến từ nhiều function.\nClosure cho phép bạn truy cập function mẹ từ function con nằm bên trong. Trong javascript, closures được tạo ra khi một function được tạo, nghĩa là tại thời điểm <strong>function ấy được tạo</strong>.\nĐể dùng được closure, ta định nghĩa một function bên trong một function khác và <strong>expose</strong> function con đấy. Để <strong>expose</strong> function con, ta có thể return hoặc chuyền nó vào một function khác. Từ <em>expose</em> các bạn cứ hiểu nó giống như là <strong>public</strong> cho đơn giản nhé.\nCác Function bên trong có thể truy cập biến của function mẹ, kể cả ngay khi function mẹ đã <em>returned</em> (nghĩa là khi function đã kết thúc)</p>\n<h2 id=\"sử-dụng-closures\" style=\"position:relative;\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-closures\" aria-label=\"sử dụng closures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sử dụng Closures</h2>\n<h3 id=\"cung-cấp-các-dữ-liệu-riêng-tư-cho-object\" style=\"position:relative;\"><a href=\"#cung-c%E1%BA%A5p-c%C3%A1c-d%E1%BB%AF-li%E1%BB%87u-ri%C3%AAng-t%C6%B0-cho-object\" aria-label=\"cung cấp các dữ liệu riêng tư cho object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cung cấp các dữ liệu riêng tư cho object</h3>\n<p>Các dữ liệu riêng tư thường được dùng với mục đích <strong>chỉ đọc</strong> chứ không được phép thay đổi, chỉnh sửa, xoá.\nĐiều này rất quan trọng vì nó sẽ giúp chúng ta xay dựng những phần mềm mạnh mẽ hơn vì việc chỉnh sửa sẽ gây ra những thay đổi có thể dẫn đến lỗi phần mềm còn việc <strong>chỉ đọc</strong> sẽ gần như không gây ra lỗi\nHãy xem ví dụ dưới đây:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> secret <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> secret<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong Javascript, closures là một cách để bật quyền chia sẻ dữ liệu riêng tư. Khi bạn dùng closure để chia sẻ dữ liệu riêng tư, những biến đi kèm sẽ chỉ tồn tại trong scope của hàm mẹ.\nBạn không thể lấy dữ liệu từ phía ngoài scope của function mẹ, cách duy nhất là qua các phương thức <strong>privileged methods</strong> (phương thức đặc quyền).\nfunction <code class=\"language-text\">get</code>  được khai báo trong trong scope của <code class=\"language-text\">getSecret()</code>  nên có thể truy cập bất cứ biến nào nằm trong <code class=\"language-text\">getSecret()</code>. Ta gọi <code class=\"language-text\">get()</code> là <code class=\"language-text\">privileged methods</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> secret <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">getSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsecret<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/** Ouput: \"a\" */</span>\n\n<span class=\"token comment\">/** Hoac */</span>\n\n<span class=\"token function\">getSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">/** Ouput: \"a\" */</span></code></pre></div>\n<h3 id=\"lấy-dữ-liệu-trong-function-kể-cả-khi-nó-đã-kết-thúc\" style=\"position:relative;\"><a href=\"#l%E1%BA%A5y-d%E1%BB%AF-li%E1%BB%87u-trong-function-k%E1%BB%83-c%E1%BA%A3-khi-n%C3%B3-%C4%91%C3%A3-k%E1%BA%BFt-th%C3%BAc\" aria-label=\"lấy dữ liệu trong function kể cả khi nó đã kết thúc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lấy dữ liệu trong function kể cả khi nó đã kết thúc?</h3>\n<p>Bạn xem đoạn code dưới đấy:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">getSecret</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> secret <span class=\"token operator\">=</span> <span class=\"token string\">\"secret\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">changeSecret</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    secret <span class=\"token operator\">=</span> secret <span class=\"token operator\">+</span> counter<span class=\"token punctuation\">;</span>\n    counter <span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> changeSecret<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Goi ham</span>\n<span class=\"token keyword\">const</span> newSecret <span class=\"token operator\">=</span> <span class=\"token function\">getSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> s1 <span class=\"token operator\">=</span> <span class=\"token function\">newSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> s2 <span class=\"token operator\">=</span> <span class=\"token function\">newSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> s3 <span class=\"token operator\">=</span> <span class=\"token function\">newSecret</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get secret \"</span><span class=\"token punctuation\">,</span> s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">,</span> s3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => Ouput: get secret, secret1, secret12, secret123</span></code></pre></div>\n<p>Thật kỳ lạ phải không?\nHãy nói qua về luồng code. Đầu tiên function <code class=\"language-text\">getSecret</code> được khai báo, gồm có 3 biến nằm trong đó: <code class=\"language-text\">counter</code>, <code class=\"language-text\">secret</code>, <code class=\"language-text\">changeSecret</code>. Trong đó <code class=\"language-text\">changeSecret</code> được gán cho một function, function này sẽ thay đổi biến <code class=\"language-text\">counter</code> và <code class=\"language-text\">secret</code>. Cuối cùng function <code class=\"language-text\">getSecret</code> sẽ return lại function <code class=\"language-text\">changeSecret</code>, đây là chính <strong>expose</strong> function con nằm trong function mẹ.\nTiếp đó mình sẽ gọi hàm <code class=\"language-text\">getSecret</code> để gán cho biến <code class=\"language-text\">newSecret</code>. Nên nhớ rằng <code class=\"language-text\">newSecret</code> chính là function <code class=\"language-text\">changeSecret</code> (vì <code class=\"language-text\">getSecret</code> return lại function con). Rồi mình gán 3 biến <code class=\"language-text\">s1, s2, s3</code> cho với kết quả trả về từ lời gọi hàm <code class=\"language-text\">newSecret</code>. Nếu theo tư duy thông thường kết quả sẽ phải là <code class=\"language-text\">s1, s2, s3</code> đều phải là <code class=\"language-text\">secret1</code>.</p>\n<p>Vậy vấn đề ở đây là gì?\nNhư mình đã nói ở trên: <em>closures sẽ được tạo ra khi mà function ấy được tạo</em>. Khi function <code class=\"language-text\">getSecret</code> được tạo ra, rồi gán cho cho biến <code class=\"language-text\">newSecret</code>, nó <strong>tạo một closure</strong> và các biến của function sẽ được <strong>đóng gói</strong> lại.\nHay nói cách khác tất cả các biến đã được tham chiếu vào <strong>một vùng nhớ</strong>. Nếu bạn thay đổi giá trị thì sẽ được lưu lại vào vùng nhớ đã tạo.\nLần đầu khi mà s1 được gán cho <code class=\"language-text\">newSecret()</code> thì biến <code class=\"language-text\">secret</code> và counter thay đổi, kết quả trả về là <code class=\"language-text\">counter = 1</code> và <code class=\"language-text\">secret</code> trở thành <code class=\"language-text\">secret = &quot;sceret1&quot;</code> , và thay đổi đấy <em>nằm trong closure của getSecret</em>, thế nên thay đổi đấy sẽ được lưu lại vào <strong>vùng nhớ</strong> mà mình nói ở trên. Lần gọi tiếp theo là của s2 lại thay đổi thêm một lần nữa biến <code class=\"language-text\">secret</code> cũng như <code class=\"language-text\">counter</code>, cụ thể là Output sẽ trả ra <code class=\"language-text\">counter = 2</code> và <code class=\"language-text\">secret1 thành secret12</code>, tương tự với s3 cũng vậy.</p>\n<h2 id=\"kết-luận\" style=\"position:relative;\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-label=\"kết luận permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kết luận</h2>\n<p>Closures rất đặc biệt và là một khái niệm cần biết trong Javascript vì đôi khi bạn sẽ không hiểu tại sao giá trị một biến lại có thể thay đổi trong khi mình không tác động trực tiếp?\nĐây cũng là một vấn đề cơ bản trong lập trình (Không chỉ mình Javacript mà nhiều ngôn ngữ khác cũng có), nếu đã là lập trình viên thì nên biết sự tồn tại của Closure. Vì thế khi bạn đi phỏng vấn cho một công ty với vai trò là senior nếu không trả lời được câu này bạn sẽ bị đánh dấu <strong>đỏ</strong> và bị đánh giá là thiếu kinh nghiệm.</p>","excerpt":"Lời nói đầu Nếu bạn làm việc với javascript nhiều bạn cần hiểu rõ về nó, cũng như những khái niệm cơ bản.\nKhi muốn giỏi bất cứ một việc gì…","fields":{"slug":"/Part1-Nhung-thuat-ngu-can-biet-trong-Javascript-Closure/"},"frontmatter":{"title":"Part 1: Những thuật ngữ cần biết trong javascript - Closure","date":"June 06, 2020","tags":["javascript","fundamentals"],"description":null,"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQ4y2P4fl+ObMQwqnmQaP7xAIQg7K93QexfD+W+3QMhwpq/3AXpgbD/vZQHct9dl/39VP7vM3mIfiyagRJAG97fkLWz4Aj05Pp0W/bfU/kpbUIaKqxiIsxBnlwX90j+eQzSj13z70dyr6/IsrExSksw/30qv3GBKAMDg5QEs5UpO5CREsXz/7k80FE4Nb+5KsvFySgrzfL/jUJtIT9Qz+w+4f/fFTfMF318RhroNJzOhmjm5GCUlWL5/0J+Xr8wULO2OtvyaSI/nsgDjft2F4+fYZoVZFk+35b7ek8uzI+LAQxUFVk2LxLF7uyv4ND69VD+1WWQZkU5lo83ZYHB++uF/NrZoq72HED9vDyMZ3ZI/n8mj6r5nty/F/JPzssAya8P5DjANgNteH1FBqT6u9L/n0rF6XxA/T31gv8/KCA0AxWBvNcnDDS4r0EQGDdARfaWHD8fyNuYs7OzMfY3Cu1ZKe5sA7J84USR/28xNAMDk5uLEeI9ZmaGFdNF/r9TmNYuxMMNEmRiAom7O3B8uCH78wGqn4FB9f+V/K2j0kDVfY2Cp3dI/gMnJqDg7WPSs7uFu2oF188T/XxX9vdjOSyJBCj0BxgZbxWAFsKTIdBRcEGgQcBEDhEHAEiWpWaPkwuQAAAAAElFTkSuQmCC","width":150,"height":150,"src":"/static/f00708cb380288f97a3fbfa72862ce1b/92ab1/js-thumb.png","srcSet":"/static/f00708cb380288f97a3fbfa72862ce1b/92ab1/js-thumb.png 1x,\n/static/f00708cb380288f97a3fbfa72862ce1b/668a7/js-thumb.png 1.5x,\n/static/f00708cb380288f97a3fbfa72862ce1b/56e34/js-thumb.png 2x"}}}}}},"pageContext":{"slug":"/Part1-Nhung-thuat-ngu-can-biet-trong-Javascript-Closure/","previous":{"id":"a02b574f-55fc-5b44-a60d-9cd2f42430c5","frontmatter":{"title":"Switch và if, làm thế nào để thay thế những thứ tưởng không thay thế được?","tags":["javascript","fundamentals"],"template":"post"},"fields":{"slug":"/thay-the-switch-va-if-trong-javascript/"}},"next":{"id":"25177569-dadb-55ff-94f6-4b0c587fd7fe","frontmatter":{"title":"Hai cách để làm rỗng một array","tags":["tips","javascript"],"template":"post"},"fields":{"slug":"/Hai-cach-de-lam-rong-mot-array/"}}}},"staticQueryHashes":[]}