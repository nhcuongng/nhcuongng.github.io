{"componentChunkName":"component---src-templates-post-js","path":"/quick-note-react/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"what-is-dom--how-dom-working\" style=\"position:relative;\"><a href=\"#what-is-dom--how-dom-working\" aria-label=\"what is dom  how dom working permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is DOM ? How dom working?</h2>\n<p>The HTML DOM is a standard object model and programming interface for HTML. It defines:</p>\n<ul>\n<li>The HTML elements as objects</li>\n<li>The properties of all HTML elements</li>\n<li>The methods to access all HTML elements</li>\n<li>The events for all HTML elements</li>\n</ul>\n<p>HTML Dom Tree is structure of many DOM</p>\n<h3 id=\"an-example-for-manipulating-the-dom\" style=\"position:relative;\"><a href=\"#an-example-for-manipulating-the-dom\" aria-label=\"an example for manipulating the dom permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>An example for manipulating the dom</h3>\n<p><code class=\"language-text\">document.getElementById(&#39;some-id&#39;).innerValue = &#39;updated value&#39;;</code></p>\n<p>When writing the above code in the console or in the JavaScript file, these things happen: </p>\n<ul>\n<li>The browser parses the HTML to find the node with this id.</li>\n<li>It removes the child element of this specific element.</li>\n<li>Updates the element(DOM) with the ‘updated value’.</li>\n<li>Recalculates the CSS for the parent and child nodes. (<em>reflow</em>)</li>\n<li>Update the layout.</li>\n<li>Finally, traverse the tree and paint it on the screen(browser) display. (<em>repainted</em>)</li>\n</ul>\n<p><strong>=> the above example is reflow, it is critical to performance</strong></p>\n<h2 id=\"reflow-and-repainted\" style=\"position:relative;\"><a href=\"#reflow-and-repainted\" aria-label=\"reflow and repainted permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reflow and repainted</h2>\n<p>A repaint occurs when changes are made to an elements skin that changes visibly, but do not affect its layout.\n<em>Examples of this include outline, visibility, background, or color. According to Opera, repaint is expensive because the browser must verify the visibility of all other nodes in the DOM tree.</em></p>\n<p>A reflow is even more critical to performance because it involves changes that affect the layout of a portion of the page (or the whole page).\n<em>Examples that cause reflows include: adding or removing content, explicitly or implicitly changing width, height, font-family, font-size and more.</em></p>\n<p>More clearly with a diagram\n<a href=\"https://gist.github.com/faressoft/36cdd64faae21ed22948b458e6bf04d5\">https://gist.github.com/faressoft/36cdd64faae21ed22948b458e6bf04d5</a></p>\n<p>Batching all the dom change\n<a href=\"https://stackoverflow.com/questions/37039667/executing-multiple-dom-updates-with-javascript-efficiently\">https://stackoverflow.com/questions/37039667/executing-multiple-dom-updates-with-javascript-efficiently</a></p>\n<p><strong>=> reflow change directly to the DOM Tree => critical performance => The virtual dom rescue</strong></p>\n<h2 id=\"why-virtual-dom-is-a-solution\" style=\"position:relative;\"><a href=\"#why-virtual-dom-is-a-solution\" aria-label=\"why virtual dom is a solution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why virtual dom is a solution?</h2>\n<p>Virtual DOM: React uses Virtual DOM exists which is like a lightweight copy of the actual DOM(a virtual representation of the DOM). So for every object that exists in the original DOM, there is an object for that in React Virtual DOM. It is exactly the same, but it does not have the power to directly change the layout of the document. Manipulating DOM is slow, but manipulating Virtual DOM is fast as nothing gets drawn on the screen. So each time there is a change in the state of our application, virtual DOM gets updated first instead of the real DOM. You may still wonder, “Aren’t we doing the same thing again and doubling our work? How can this be faster?” Read below to understand how things will be faster using virtual DOM.</p>\n<p>How Virtual DOM actually make the things faster: When anything new is added to the application, a virtual DOM is created and it is represented as a tree. Each element in the application is a node in this tree. So, whenever there is a change in state of any element, a new Virtual DOM tree is created. This new Virtual DOM tree is then compared with the previous Virtual DOM tree and make a note of the changes. After this, it finds the best possible ways to make these changes to the real DOM. Now only the updated elements will get rendered on the page again.</p>\n<p>How Virtual DOM helps React: In react, everything is treated as a component be it a functional component or class component. A component can contain a state. Each time we change something in our JSX file or let’s put it in simple terms, whenever the state of any component is changed react updates it’s Virtual DOM tree. Though it may sound that it is ineffective but the cost is not much significant as updating the virtual DOM doesn’t take much time. React maintains two Virtual DOM at each time, one contains the updated Virtual DOM and one which is just the pre-update version of this updated Virtual DOM. Now it compares the pre-update version with the updated Virtual DOM and figures out what exactly has changed in the DOM like which components have been changed. This process of comparing the current Virtual DOM tree with the previous one is known as ‘diffing’. Once React finds out what exactly has changed then it updated those objects only, on real DOM. React uses something called as batch updates to update the real DOM. It just mean that the changes to the real DOM are sent in batches instead of sending any update for a single change in the state of a component. We have seen that the re-rendering of the UI is the most expensive part and React manages to do this most efficiently by ensuring that the Real DOM receives batch updates to re-render the UI. This entire proces of transforming changes to the real DOM is called Reconciliation</p>\n<p>This significantly improves the performance and is the main reason why React and it’s Virtual DOM is much loved by developers all around.</p>\n<p>source: <a href=\"https://www.geeksforgeeks.org/reactjs-virtual-dom/\">https://www.geeksforgeeks.org/reactjs-virtual-dom/</a></p>\n<p><strong>=> It mean that the reflow with not interact with real DOM, it with interact with the virtual dom firstly. All the part require costly performance in Virtual dom. A updated Virtual dom with batch all update send to real DOM tree. And dom tree just repainted the changed part only in once time</strong></p>","excerpt":"What is DOM ? How dom working? The HTML DOM is a standard object model and programming interface for HTML. It defines: The HTML elements as…","fields":{"slug":"/quick-note-react/"},"frontmatter":{"title":"(A personal Note) DOM and Virtual DOM","date":"December 26, 2021","tags":["javascript"],"description":"This is a personal quick note about DOM and Virtual DOM","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQ4y2P4fl+ObMQwqnmQaP7xAIQg7K93QexfD+W+3QMhwpq/3AXpgbD/vZQHct9dl/39VP7vM3mIfiyagRJAG97fkLWz4Aj05Pp0W/bfU/kpbUIaKqxiIsxBnlwX90j+eQzSj13z70dyr6/IsrExSksw/30qv3GBKAMDg5QEs5UpO5CREsXz/7k80FE4Nb+5KsvFySgrzfL/jUJtIT9Qz+w+4f/fFTfMF318RhroNJzOhmjm5GCUlWL5/0J+Xr8wULO2OtvyaSI/nsgDjft2F4+fYZoVZFk+35b7ek8uzI+LAQxUFVk2LxLF7uyv4ND69VD+1WWQZkU5lo83ZYHB++uF/NrZoq72HED9vDyMZ3ZI/n8mj6r5nty/F/JPzssAya8P5DjANgNteH1FBqT6u9L/n0rF6XxA/T31gv8/KCA0AxWBvNcnDDS4r0EQGDdARfaWHD8fyNuYs7OzMfY3Cu1ZKe5sA7J84USR/28xNAMDk5uLEeI9ZmaGFdNF/r9TmNYuxMMNEmRiAom7O3B8uCH78wGqn4FB9f+V/K2j0kDVfY2Cp3dI/gMnJqDg7WPSs7uFu2oF188T/XxX9vdjOSyJBCj0BxgZbxWAFsKTIdBRcEGgQcBEDhEHAEiWpWaPkwuQAAAAAElFTkSuQmCC","width":150,"height":150,"src":"/static/f00708cb380288f97a3fbfa72862ce1b/92ab1/js-thumb.png","srcSet":"/static/f00708cb380288f97a3fbfa72862ce1b/92ab1/js-thumb.png 1x,\n/static/f00708cb380288f97a3fbfa72862ce1b/668a7/js-thumb.png 1.5x,\n/static/f00708cb380288f97a3fbfa72862ce1b/56e34/js-thumb.png 2x"}}}}}},"pageContext":{"slug":"/quick-note-react/","previous":{"id":"0c54e786-3d08-54fb-b6ae-2c074a705529","frontmatter":{"title":"The misunderstanding about useEffect has deps","tags":["typescript","javascript","tips"],"template":"post"},"fields":{"slug":"/misunderstanding-useEffect-has-deps/"}},"next":null}},"staticQueryHashes":[]}