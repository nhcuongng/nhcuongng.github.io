{"componentChunkName":"component---src-templates-post-js","path":"/Mobx-Quan-ly-state-trong-react-Part-2/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"lời-nói-đầu\" style=\"position:relative;\"><a href=\"#l%E1%BB%9Di-n%C3%B3i-%C4%91%E1%BA%A7u\" aria-label=\"lời nói đầu permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lời nói đầu</h1>\n<p>Part 1 mình đã hướng dẫn cách viết mobx cơ bản và cách kết hợp <strong>mobx</strong> với react. Nay mình sẽ hướng dẫn các bạn một số function đặc biệt trong <strong>mobx</strong> và <strong>mobx-react</strong></p>\n<!--more-->\n<h1 id=\"uselocalstore---giải-pháp-thay-thế-usestate-hook\" style=\"position:relative;\"><a href=\"#uselocalstore---gi%E1%BA%A3i-ph%C3%A1p-thay-th%E1%BA%BF-usestate-hook\" aria-label=\"uselocalstore   giải pháp thay thế usestate hook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useLocalStore - giải pháp thay thế useState hook</h1>\n<p>Bình thường trong function component chúng ta muốn dùng state ta sẽ dùng <code class=\"language-text\">useState</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cuong'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Chúng ta hãy tưởng tượng có 10 <code class=\"language-text\">state</code> lại phải có 10 function đóng vai trò <code class=\"language-text\">setState</code> đi cùng. Thật là nhiều phải không?\nTuy nhiên, nếu chúng ta dùng <code class=\"language-text\">useLocalStore</code>, một function built-in nằm trong <code class=\"language-text\">mobx-react</code> thì không cần như thế nữa. Khi dùng function này chúng ta sẽ có một <strong>local store</strong> cỡ nhỏ. Việc thay đổi nó sẽ dựa vào việc <strong>mutate</strong> trực tiếp\nBạn hãy nhìn ví dụ dưới đấy</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useLocalStore<span class=\"token punctuation\">,</span> observer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx-react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> CounterWithLocalStore <span class=\"token operator\">=</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Khai báo một store</span>\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">useLocalStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    count<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">increase</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// việc thay đổi sẽ được mutate trực tiếp</span>\n    <span class=\"token function-variable function\">decrease</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">reset</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count<span class=\"token punctuation\">,</span> increase<span class=\"token punctuation\">,</span> decrease<span class=\"token punctuation\">,</span> reset <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token function\">Count</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">with</span> local store<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>increase<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Increase <span class=\"token operator\">+</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>decrease<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Decrease <span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>reset<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Reset<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"computed---giá-trị-sẽ-được-tính-toán-lại-mỗi-khi-observable-value-thay-đổi\" style=\"position:relative;\"><a href=\"#computed---gi%C3%A1-tr%E1%BB%8B-s%E1%BA%BD-%C4%91%C6%B0%E1%BB%A3c-t%C3%ADnh-to%C3%A1n-l%E1%BA%A1i-m%E1%BB%97i-khi-observable-value-thay-%C4%91%E1%BB%95i\" aria-label=\"computed   giá trị sẽ được tính toán lại mỗi khi observable value thay đổi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>computed - giá trị sẽ được tính toán lại mỗi khi observable value thay đổi</h1>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> observable<span class=\"token punctuation\">,</span> computed <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderLine</span> <span class=\"token punctuation\">{</span>\n    @observable price <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    @observable amount <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Giá trị này sẽ được tính toán và trả về mỗi khi 2 giá trị observable ở trên bị thay đổi</span>\n    @computed <span class=\"token keyword\">get</span> <span class=\"token function\">total</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>amount\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nOrderLine<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>OrderLine<span class=\"token punctuation\">.</span>total<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 12</span></code></pre></div>\n<h1 id=\"autorun---thường-dùng-cho-việc-log-thông-tin\" style=\"position:relative;\"><a href=\"#autorun---th%C6%B0%E1%BB%9Dng-d%C3%B9ng-cho-vi%E1%BB%87c-log-th%C3%B4ng-tin\" aria-label=\"autorun   thường dùng cho việc log thông tin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>autorun - thường dùng cho việc log thông tin</h1>\n<p>Có vài điều cần lưu ý về <code class=\"language-text\">autorun</code></p>\n<ul>\n<li>Cũng giống như <code class=\"language-text\">computed</code> cũng sẽ chạy khi observable thay đổi, tuy nhiên <code class=\"language-text\">autorun</code> không trả về giá trị mới</li>\n<li><code class=\"language-text\">autorun</code> trả về một disposer function, hàm này có vai trò huỷ bỏ <code class=\"language-text\">autorun</code></li>\n<li>Tham số thứ nhất mà <code class=\"language-text\">autorun</code> trả về một biến dùng để <strong>debug</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> observable<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">,</span> autorun <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderLine</span> <span class=\"token punctuation\">{</span>\n    @observable price <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    @observable amount <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">autorun</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>reaction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            reaction<span class=\"token punctuation\">.</span><span class=\"token function\">dispose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// dừng log lại nếu total > 10</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Giá trị này sẽ được tính toán và trả về mỗi khi 2 giá trị observable ở trên bị thay đổi</span>\n    @computed <span class=\"token keyword\">get</span> <span class=\"token function\">total</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>amount\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nOrderLine<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log ra 9</span>\nOrderLine<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log ta 11 sau đó bị huỷ bỏ</span>\nOrderLine<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token operator\">:</span> <span class=\"token comment\">// ngưng log vì đã bị huỷ bỏ</span></code></pre></div>\n<h1 id=\"when---xảy-ra-với-điều-kiện-nào\" style=\"position:relative;\"><a href=\"#when---x%E1%BA%A3y-ra-v%E1%BB%9Bi-%C4%91i%E1%BB%81u-ki%E1%BB%87n-n%C3%A0o\" aria-label=\"when   xảy ra với điều kiện nào permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>when - xảy ra với điều kiện nào</h1>\n<p>Đôi lúc các bạn sẽ muốn biết khi nào dữ liệu đấy thay đổi và sẽ thay đổi khi nó phù hợp với điều kiện nào</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> observable<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">,</span> when <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderLine</span> <span class=\"token punctuation\">{</span>\n    @observable price <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    @observable amount <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// chỉ chạy một lần</span>\n      <span class=\"token comment\">// Khi this.total lớn hơn 10 thì gán lại this.total = 0</span>\n      <span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Giá trị này sẽ được tính toán và trả về mỗi khi 2 giá trị observable ở trên bị thay đổi</span>\n    @computed <span class=\"token keyword\">get</span> <span class=\"token function\">total</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>amount\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nOrderLine<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>OrderLine<span class=\"token punctuation\">.</span>total<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span></code></pre></div>\n<h1 id=\"reaction---một-phiên-bản-nâng-cấp-so-với-autorun\" style=\"position:relative;\"><a href=\"#reaction---m%E1%BB%99t-phi%C3%AAn-b%E1%BA%A3n-n%C3%A2ng-c%E1%BA%A5p-so-v%E1%BB%9Bi-autorun\" aria-label=\"reaction   một phiên bản nâng cấp so với autorun permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reaction - một phiên bản nâng cấp so với autorun</h1>\n<p>reaction nhận vào hai tham số, cả hai đều là function</p>\n<ul>\n<li>function thứ nhất (data function) là function đóng vai trò là dữ liệu được theo dõi, dữ liệu trả lại sẽ là đầu vào cho function thứ hai</li>\n<li>function thứ hai (effect function) có hai tham số được trả về, tham số thứ nhất là dữ liệu từ function thứ nhất, tham số thứ hai là <strong>reaction</strong> (vai trò như trong autorun)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> observable<span class=\"token punctuation\">,</span> computed<span class=\"token punctuation\">,</span> reaction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Todo</span> <span class=\"token punctuation\">{</span>\n    @observable todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">\"Make coffee\"</span><span class=\"token punctuation\">,</span>\n          done<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">\"Find biscuit\"</span><span class=\"token punctuation\">,</span>\n          done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// reaction 1</span>\n      <span class=\"token comment\">// Cách sửa dụng reaction sai: nó chỉ theo dõi dộ dài của array todos</span>\n      <span class=\"token function\">reaction</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> todos<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"reaction 1:\"</span><span class=\"token punctuation\">,</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// reaction 2</span>\n      <span class=\"token comment\">// Cách sửa dụng đúng: nó sẽ theo dõi cả độ dài và khi titles thay đổi</span>\n      <span class=\"token function\">reaction</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> todo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>titles<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"reaction 2:\"</span><span class=\"token punctuation\">,</span> titles<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nTodo<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> title<span class=\"token operator\">:</span> <span class=\"token string\">\"explain reactions\"</span><span class=\"token punctuation\">,</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// prints:</span>\n<span class=\"token comment\">// reaction 1: Make coffee, find biscuit, explain reactions</span>\n<span class=\"token comment\">// reaction 2: Make coffee, find biscuit, explain reactions</span>\n\nTodo<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Make tea\"</span>\n<span class=\"token comment\">// prints:</span>\n<span class=\"token comment\">// reaction 2: Make tea, find biscuit, explain reactions</span></code></pre></div>\n<h1 id=\"code-sandbox\" style=\"position:relative;\"><a href=\"#code-sandbox\" aria-label=\"code sandbox permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code sandbox</h1>\n<p>Mình đã chuẩn bị code mẫu cho các bạn ở <a href=\"https://codesandbox.io/s/mobx-react-typescript-tsnlk?file=/src/App.tsx\">code sandbox</a></p>\n<h1 id=\"kết-luận\" style=\"position:relative;\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-label=\"kết luận permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kết luận</h1>\n<p>Qua hai phần về mobx, mình đã giới thiệu cho các bạn cách dùng mobx với react cũng như các function thường sử dụng đi kèm.\nMong các bạn các bạn làm việc thật tốt với mobx. Và sắp tới sẽ đón nhận bài viết về <strong>Redux</strong> của mình nhé. Thanks!</p>\n<h1 id=\"tham-khảo\" style=\"position:relative;\"><a href=\"#tham-kh%E1%BA%A3o\" aria-label=\"tham khảo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tham khảo</h1>\n<p>Trang chủ <a href=\"https://mobx.js.org/\">mobx</a></p>","excerpt":"Lời nói đầu Part 1 mình đã hướng dẫn cách viết mobx cơ bản và cách kết hợp mobx với react. Nay mình sẽ hướng dẫn các bạn một số function đặc…","fields":{"slug":"/Mobx-Quan-ly-state-trong-react-Part-2/"},"frontmatter":{"title":"Mobx - Quản lý state trong React - Part 2","date":"August 16, 2020","tags":["react","mobx"],"description":"Giải pháp cho quản lý state trong react","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEjElEQVQ4y5VUe0yTVxS//UAotSXQ8ZIwH2wsc/GPmWU6jDKcLhLY2IAxBlKeIoNJVIYPEJHXeFhQQHklZSbKy2VhkcdgsokCA8asIMLGo9CWVgptoQGGtLXl7H4ftmBkf+wmN/fc8537+84993d+CP3H8AMwzVHAweRnsB39n5E8rkFMuy2UXQWArDZbbEGOzu8U9gqbHgyLoaZvYt73amUA/uzCtLHfhlcGGUsjTDYGzOFPGm23/XtYePnMzvVIYVZRCfAK857XVt0Cr5iEbuz/wgyhOFNz+sdkLJvFQKZ0i41BY1VAM9hhAG9yu4bKWiaUeqlyXjc4q4byh6MDKaNaL0NMYdsfxvQuCFZQ0phuDSx+CgjKwNctaudn38+P1i6deQsGuEHwS2sDtFXmgerMTpjIOAI1tyt+j1LDLgq0nW+yFZ+hQMdWXs2yoqmxTpHiCqpgM5CFWtaq/FCowAcdUngj7xkOI10eTBfrTthCc2nSwgUBuJNnUv/6h1bRWP8yUIgerLi9ghvTya6gOLpJORHj7LlRWfrPHrCaCmfXqY8x4Xpbjz56EUJJf5wSaCkjmrVA7DhV3fMnyDkWevFxJwpsPNjOY9TP4rqQY5015r8pXxJqlWyIVxw17xwui4Ws/umb5L71WjyRIIU1wPzuvzPmMt0BX6nS4BsPtC6C9P0gD2eD/uJuUJ500cg8kSX5TRiz3V0dYgItxecEuO4UhbL6ZGuAdTevNGlP2MHTcLa/wTfhR/9uPtcH5AWcxUXe1yszsdskI26I4kh/0iH6TAhztC/TF07KYc8q9SQE+drUaC6/yJ899hpMRjnuMwCKgthcfa4XTKccXlEX+II0dsfsoAsykk7OYdyVph6ERDF8Qu5z+ZMm6YIX1KnmXe5aitgMsnDrw4YD0jCH85LI17XjAZbSyTAblSiM/XjIA5lT7CIQoQhAXX2Zn0OYcDXDqKq7psYrN4vm5h/dSgUph0kVXh63w/TSXpZZ9fuIpU11oz/0Ihil7yFGfUECxdef0gKdmn/kLdwbEcENBRS9Qofezg5d19QCdGYFifBbUYW3ZxBvkJ2I59t4foDnToDVBijvGcweXtCBcHREU9fJhy/L66Oxm8mydSD73BG1/3xH/0S5BIPcQJj9Cv2w7l8sSzOCbUYgG2xTYAueyKeVl6aXzquhraEOsq+VwW7/iGpSnHCP++IVF0Oq0hSL9Y0tRaflK9GWMB3CvC/5xtkVlmuN/So7+66DNNIufS6QBo9x7b4XLos6xAp1jUTTFALwskJ4P9JRevetDA408DKeLiXugsVwBswEWwzjjJuVgSad2H6mj7OH/stBUPJbRy7mH91vALYaVepSCSkuRoFBujtc6kofAjiU/vrgSkvJOemTjE+h53Ye9JWfhs4czjIWhtbzIvBYnwzZHxFtYgrIed9Hq87Lo8s0Umnyu4fXFBOAdWoa9mIlKo+XQbwvgJORUpG2xHEN0PJHFmnpY88pH1egXVOc5DE9Kr7XRdmJQqD1ZPgRG4kDzoaW1zNCeL6QrLShBWTsjnXjX3P1Np6ZV8uGAAAAAElFTkSuQmCC","width":150,"height":150,"src":"/static/0fd8a6973e72ff7ffe97cab88ca0fd44/92ab1/mobx-thumbnail.png","srcSet":"/static/0fd8a6973e72ff7ffe97cab88ca0fd44/92ab1/mobx-thumbnail.png 1x,\n/static/0fd8a6973e72ff7ffe97cab88ca0fd44/668a7/mobx-thumbnail.png 1.5x,\n/static/0fd8a6973e72ff7ffe97cab88ca0fd44/56e34/mobx-thumbnail.png 2x"}}}}}},"pageContext":{"slug":"/Mobx-Quan-ly-state-trong-react-Part-2/","previous":{"id":"3b9ed41a-6b7b-5564-9664-aa3153171385","frontmatter":{"title":"Mobx - Quản lý state trong React - Part 1","tags":["react","mobx"],"template":"post"},"fields":{"slug":"/Mobx-Quan-ly-state-trong-react-part-1/"}},"next":null}},"staticQueryHashes":[]}